<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work-Life Balance Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="insights-styles.css">
    <link rel="stylesheet" href="analytics-styles.css">
    <link rel="stylesheet" href="life-balance-styles.css">
    <link rel="stylesheet" href="help-styles.css">
    <link rel="stylesheet" href="expense-fix.css">
    <link rel="stylesheet" href="expense-category-cleanup.css">
    <link rel="stylesheet" href="games-styles.css">
    <link rel="stylesheet" href="queens-colors-styles.css">
    <link rel="stylesheet" href="automated-mood-styles.css">
    <link rel="stylesheet" href="memories-styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h2>💼 WLB Companion</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#" data-section="dashboard" class="nav-link active">
                    <span class="icon">🏠</span> Dashboard
                </a></li>
                <li><a href="#" data-section="tasks" class="nav-link">
                    <span class="icon">📑</span> Tasks
                </a></li>
                <li><a href="#" data-section="expenses" class="nav-link">
                    <span class="icon">��</span> Expenses
                </a></li>
                <li><a href="#" data-section="food" class="nav-link">
                    <span class="icon">🍲</span> Food & Nutrition
                </a></li>
                <li><a href="#" data-section="fitness" class="nav-link">
                    <span class="icon">💪</span> Fitness
                </a></li>
                <li><a href="#" data-section="stress" class="nav-link">
                    <span class="icon">😌</span> Stress & Mood
                </a></li>
                <li><a href="#" data-section="games" class="nav-link">
                    <span class="icon">🎮</span> Games
                </a></li>
                <li><a href="#" data-section="memories" class="nav-link">
                    <span class="icon">📸</span> Memories
                </a></li>
                <li><a href="#" data-section="report" class="nav-link">
                    <span class="icon">📊</span> Report Generator
                </a></li>
                <li><a href="#" data-section="help" class="nav-link">
                    <span class="icon">❓</span> Help
                </a></li>
            </ul>
            <div class="theme-toggle">
                <button id="darkModeToggle">🌙 Dark Mode</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h1 id="greeting">Hello there, here's your day at a glance.</h1>
                </div>
                <div class="dashboard-grid">
                    <div class="widget task-widget">
                        <h3>📑 Tasks Today</h3>
                        <div class="widget-content">
                            <div class="stat-number" id="tasksCompleted">0</div>
                            <div class="stat-label">Completed / <span id="totalTasks">0</span> Total</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="taskProgress"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="widget expense-widget">
                        <h3>💰 Weekly Spending</h3>
                        <div class="widget-content">
                            <div class="stat-number" id="weeklyExpense">₹0</div>
                            <div class="stat-label">This Week</div>
                        </div>
                    </div>
                    
                    <div class="widget food-widget">
                        <h3>🍽️ Today's Meal</h3>
                        <div class="widget-content">
                            <div id="mealSuggestion">Healthy Oats Bowl</div>
                            <div class="stat-label">Suggested</div>
                        </div>
                    </div>
                    
                    <div class="widget fitness-widget">
                        <h3>🏋️ Workout Streak</h3>
                        <div class="widget-content">
                            <div class="stat-number" id="workoutStreak">0</div>
                            <div class="stat-label">Days 🔥</div>
                        </div>
                    </div>
                    
                    <div class="widget stress-widget">
                        <h3>😌 Stress Level</h3>
                        <div class="widget-content">
                            <div class="stress-emoji" id="currentStress">😐</div>
                            <div class="stat-label">Today</div>
                        </div>
                    </div>
                    
                    <div class="widget summary-widget">
                        <h3>📊 Weekly Summary</h3>
                        <div class="widget-content">
                            <p id="weeklySummary">You completed 80% of tasks, spent ₹4200, cooked 3 healthy meals, did 4 workouts, stress was high on 2 days.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Task Manager Section -->
            <section id="tasks" class="section">
                <div class="section-header">
                    <h1>📑 Task Manager</h1>
                    <div class="header-actions">
                        <button class="btn-secondary export-btn" data-section="tasks" data-format="csv">📊 Export CSV</button>
                        <button class="btn-secondary export-btn" data-section="tasks" data-format="json">📄 Export JSON</button>
                        <button class="btn-primary" id="addTaskBtn">+ Add Task</button>
                    </div>
                </div>
                
                <div class="task-stats">
                    <div class="stat-card">
                        <span id="taskStreak">0</span>
                        <label>Day Streak</label>
                    </div>
                    <div class="stat-card">
                        <span id="todayProgress">0%</span>
                        <label>Today's Progress</label>
                    </div>
                </div>

                <div class="task-filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="today">Today</button>
                    <button class="filter-btn" data-filter="upcoming">Upcoming</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                </div>

                <div class="task-list" id="taskList">
                    <!-- Tasks will be dynamically added here -->
                </div>

                <!-- Add Task Modal -->
                <div id="taskModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Add New Task</h2>
                        <form id="taskForm">
                            <input type="text" id="taskTitle" placeholder="Task title" required>
                            <select id="taskCategory">
                                <option value="work">💼 Work</option>
                                <option value="personal">👤 Personal</option>
                                <option value="health">��� Health & Fitness</option>
                                <option value="food">🍕 Food & Dining</option>
                                <option value="bills">📧 Bills & Utilities</option>
                                <option value="shopping">🛍️ Shopping</option>
                                <option value="travel">✈️ Travel & Transport</option>
                                <option value="entertainment">🎬 Entertainment</option>
                                <option value="education">📚 Education</option>
                                <option value="reminder">⏰ Reminder</option>
                                <option value="other">📦 Other</option>
                            </select>
                            <input type="date" id="taskDate">
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" id="taskExpense" onchange="toggleExpenseDetails(this)">
                                    <span class="checkmark"></span>
                                    This task involves an expense
                                </label>
                            </div>
                            <div id="expenseTaskDetails" class="expense-details-hide">
                                <input type="number" id="taskAmount" placeholder="Expected amount (₹) *" step="0.01" min="0.01">
                                <div class="expense-info">
                                    <p class="expense-note">✨ <strong>Smart Expense Tracking:</strong> When you complete this task, the expense will automatically be added to your expense tracker on the task's date and appear in your expense calendar.</p>
                                    <p class="expense-note">📂 The expense category will be automatically determined based on your task category above.</p>
                                </div>
                            </div>
                            <button type="submit" class="btn-primary">Add Task</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Expense Tracker Section -->
            <section id="expenses" class="section">
                <div class="section-header">
                    <h1>💰 Expense Tracker</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" id="viewToggleBtn">📅 Calendar View</button>
                        <button class="btn-primary" id="addExpenseBtn">+ Add Expense</button>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="expense-tabs">
                    <button class="tab-btn active" data-tab="overview">📊 Overview</button>
                    <button class="tab-btn" data-tab="calendar">📅 Calendar</button>
                    <button class="tab-btn" data-tab="analytics">📈 Analytics</button>
                    <button class="tab-btn" data-tab="insights">💡 Insights</button>
                    <button class="tab-btn" data-tab="reports">📋 Reports</button>
                </div>

                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-content active">
                    <!-- Monthly Income Section -->
                    <div class="income-tracker">
                        <h3>💰 Monthly Financial Overview</h3>
                        <div class="income-stats">
                            <div class="income-card">
                                <div class="income-amount">
                                    <span id="monthlyIncomeDisplay">₹0</span>
                                    <button class="btn-link" id="setIncomeBtn">Set Income</button>
                                </div>
                                <label>Monthly Income</label>
                            </div>
                            <div class="income-card">
                                <span id="monthlySpendingTotal">₹0</span>
                                <label>Monthly Spending</label>
                            </div>
                            <div class="income-card savings-card">
                                <span id="monthlySavingsAmount">₹0</span>
                                <label>Monthly Savings</label>
                            </div>
                            <div class="income-card">
                                <span id="savingsPercentage">0%</span>
                                <label>Savings Rate</label>
                            </div>
                        </div>
                    </div>

                    <div class="expense-stats">
                        <div class="stat-card">
                            <span id="dailySpending">₹0</span>
                            <label>Today</label>
                        </div>
                        <div class="stat-card">
                            <span id="weeklySpending">₹0</span>
                            <label>This Week</label>
                        </div>
                        <div class="stat-card">
                            <span id="monthlySpending">₹0</span>
                            <label>This Month</label>
                        </div>
                        <div class="stat-card">
                            <span id="averageDaily">₹0</span>
                            <label>Daily Average</label>
                        </div>
                    </div>

                    <div class="expense-overview-grid">
                        <div class="savings-goal">
                            <h3>💰 Savings Goal</h3>
                            <div class="goal-progress">
                                <span>This month's goal: ₹<span id="savingsGoalAmount">10,000</span> saved</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="savingsProgress"></div>
                                </div>
                                <span id="savingsAmount">Progress: ₹6,500</span>
                            </div>
                            <button class="btn-link" id="setSavingsGoalBtn">Set Goal</button>
                        </div>

                        <div class="budget-tracker">
                            <h3>📋 Budget Tracker</h3>
                            <div class="budget-categories" id="budgetCategories">
                                <!-- Budget items will be added dynamically -->
                            </div>
                            <button class="btn-link" id="setBudgetBtn">Set Budget</button>
                        </div>
                    </div>

                    <div class="quick-charts">
                        <div class="chart-container">
                            <h3>Category Distribution</h3>
                            <canvas id="expenseChart" width="400" height="400"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>Weekly Trend</h3>
                            <canvas id="weeklyTrendChart" width="400" height="300"></canvas>
                        </div>
                    </div>

                    <div class="recent-expenses">
                        <h3>Recent Expenses</h3>
                        <div class="expense-list" id="expenseList">
                            <!-- Recent expenses will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <!-- Calendar Tab -->
                <div id="calendar-tab" class="tab-content">
                    <div class="calendar-header">
                        <button class="btn-icon" id="prevMonthBtn">‹</button>
                        <h2 id="currentMonthYear">January 2024</h2>
                        <button class="btn-icon" id="nextMonthBtn">›</button>
                        <div class="calendar-legend">
                            <span class="legend-item"><span class="color-dot low"></span> Low (&lt; ₹500)</span>
                            <span class="legend-item"><span class="color-dot medium"></span> Medium (₹500-1500)</span>
                            <span class="legend-item"><span class="color-dot high"></span> High (&gt; ₹1500)</span>
                        </div>
                    </div>

                    <div class="expense-calendar" id="expenseCalendar">
                        <!-- Calendar will be dynamically generated -->
                    </div>

                    <div class="selected-date-expenses" id="selectedDateExpenses">
                        <h3 id="selectedDateTitle">Select a date to view expenses</h3>
                        <div class="date-expense-list" id="dateExpenseList">
                            <!-- Date-specific expenses will be shown here -->
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div id="analytics-tab" class="tab-content">
                    <div class="analytics-header">
                        <div class="analysis-navigation">
                            <button class="btn-icon" id="prevAnalyticsMonthBtn">‹</button>
                            <h3 id="currentAnalyticsMonth">This Month</h3>
                            <button class="btn-icon" id="nextAnalyticsMonthBtn">›</button>
                        </div>
                    </div>
                    <div class="analytics-grid">
                        <div class="chart-section">
                            <h3>📊 Expense Distribution</h3>
                            <canvas id="spendingTrendChart"></canvas>
                        </div>

                        <div class="chart-section">
                            <h3>🎯 Category Analysis</h3>
                            <div class="chart-controls">
                                <button class="btn-small active" data-chart="pie">Pie Chart</button>
                                <button class="btn-small" data-chart="bar">Bar Chart</button>
                                <button class="btn-small" data-chart="doughnut">Doughnut</button>
                            </div>
                            <canvas id="categoryAnalysisChart"></canvas>
                        </div>

                        <div class="chart-section">
                            <h3>💳 Payment Method Analysis</h3>
                            <canvas id="paymentMethodChart"></canvas>
                        </div>

                        <div class="chart-section">
                            <h3>📊 Weekly Spending Pattern</h3>
                            <canvas id="comparisonChart"></canvas>
                        </div>
                    </div>

                    <div class="analytics-summary">
                        <h3>🎯 Key Insights</h3>
                        <div class="insights-grid" id="analyticsInsights">
                            <!-- Analytics insights will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Insights Tab -->
                <div id="insights-tab" class="tab-content">
                    <div class="insights-header">
                        <div class="analysis-navigation">
                            <button class="btn-icon" id="prevInsightsMonthBtn">‹</button>
                            <h3 id="currentInsightsMonth">This Month</h3>
                            <button class="btn-icon" id="nextInsightsMonthBtn">›</button>
                        </div>
                    </div>
                    <div class="insights-dashboard">
                        <!-- Financial Health Score -->
                        <div class="financial-health-section">
                            <h3>🏥 Financial Health Score</h3>
                            <div class="health-score-container">
                                <div class="health-score-circle">
                                    <div class="health-score-value" id="healthScoreValue">0</div>
                                    <div class="health-score-label">out of 100</div>
                                </div>
                                <div class="health-breakdown" id="healthBreakdown">
                                    <!-- Health score breakdown will be shown here -->
                                </div>
                            </div>
                        </div>

                        <!-- Income vs Expenses Comparison -->
                        <div class="income-vs-expenses">
                            <h3>💰 Income vs Expenses</h3>
                            <div class="comparison-chart-container">
                                <canvas id="incomeVsExpensesChart" width="600" height="300"></canvas>
                            </div>
                            <div class="comparison-summary" id="comparisonSummary">
                                <!-- Income vs expenses summary will be shown here -->
                            </div>
                        </div>

                        <!-- Category Analysis -->
                        <div class="category-insights">
                            <h3>📊 Category Insights</h3>
                            <div class="category-analysis-grid" id="categoryAnalysisGrid">
                                <!-- Category-wise analysis will be shown here -->
                            </div>
                        </div>

                        <div class="prediction-section">
                            <h3>🔮 Advanced Spending Predictions</h3>
                            <div class="prediction-cards">
                                <div class="prediction-card">
                                    <h4>Next Week</h4>
                                    <div class="prediction-amount" id="nextWeekPrediction">₹0</div>
                                    <div class="prediction-confidence">Confidence: <span id="weekConfidence">85%</span></div>
                                </div>
                                <div class="prediction-card">
                                    <h4>Next Month</h4>
                                    <div class="prediction-amount" id="nextMonthPrediction">₹0</div>
                                    <div class="prediction-confidence">Confidence: <span id="monthConfidence">78%</span></div>
                                </div>
                                <div class="prediction-card">
                                    <h4>Next Quarter</h4>
                                    <div class="prediction-amount" id="nextQuarterPrediction">₹0</div>
                                    <div class="prediction-confidence">Confidence: <span id="quarterConfidence">72%</span></div>
                                </div>
                                <div class="prediction-card">
                                    <h4>Year-End Total</h4>
                                    <div class="prediction-amount" id="yearEndPrediction">₹0</div>
                                    <div class="prediction-confidence">Projected spending</div>
                                </div>
                                <div class="prediction-card">
                                    <h4>Annual Savings</h4>
                                    <div class="prediction-amount" id="annualSavingsPrediction">₹0</div>
                                    <div class="prediction-confidence">At current rate</div>
                                </div>
                                <div class="prediction-card">
                                    <h4>Budget Depletion</h4>
                                    <div class="prediction-amount" id="budgetDepletionPrediction">15 days</div>
                                    <div class="prediction-confidence">If overspending continues</div>
                                </div>
                            </div>
                        </div>

                        <div class="category-predictions">
                            <h3>📊 Category-wise Predictions</h3>
                            <div class="category-prediction-grid" id="categoryPredictions">
                                <!-- Category predictions will be generated here -->
                            </div>
                        </div>



                        <div class="patterns-section">
                            <h3>🧩 Spending Patterns</h3>
                            <div class="pattern-analysis" id="patternAnalysis">
                                <!-- Pattern analysis will be generated here -->
                            </div>
                        </div>



                    </div>
                </div>

                <!-- Reports Tab -->
                <div id="reports-tab" class="tab-content">
                    <div class="reports-dashboard">
                        <!-- Comprehensive Expenses Report -->
                        <div class="overall-report-section">
                            <div class="report-header">
                                <h2>📊 Overall Expenses Report</h2>
                                <div class="export-buttons">
                                    <button class="btn-secondary" onclick="app.exportReport('json')">📄 Export JSON</button>
                                    <button class="btn-secondary" onclick="app.exportReport('csv')">📊 Export CSV</button>
                                    <button class="btn-secondary" onclick="app.refreshReport()">🔄 Refresh Report</button>
                                </div>
                            </div>

                            <!-- Report Period Navigation -->
                            <div class="report-navigation">
                                <div class="period-navigation">
                                    <button class="nav-btn" id="prevPeriodBtn" onclick="app.navigateReportPeriod('prev')">‹ Previous</button>
                                    <div class="current-period">
                                        <h3 id="currentReportPeriod">This Month</h3>
                                        <select id="periodSelector" onchange="app.changePeriodType(this.value)">
                                            <option value="month">Monthly View</option>
                                            <option value="quarter">Quarterly View</option>
                                            <option value="year">Yearly View</option>
                                            <option value="all">All Time</option>
                                            <option value="week">Weekly View</option>
                                            <option value="custom">Custom Period</option>
                                        </select>
                                    </div>
                                    <button class="nav-btn" id="nextPeriodBtn" onclick="app.navigateReportPeriod('next')">Next ›</button>
                                </div>

                                <!-- Custom Date Range (hidden by default) -->
                                <div class="custom-date-range" id="customDateRange" style="display: none;">
                                    <div class="date-inputs">
                                        <input type="date" id="customStartDate" onchange="app.updateCustomPeriod()">
                                        <span>to</span>
                                        <input type="date" id="customEndDate" onchange="app.updateCustomPeriod()">
                                    </div>
                                    <button class="btn-small" onclick="app.resetToCurrentMonth()">Reset to Current Month</button>
                                </div>
                            </div>

                            <!-- Report Generated Info -->
                            <div class="report-info">
                                <div class="report-meta">
                                    <span class="report-generated">Generated: <span id="reportGeneratedTime">Loading...</span></span>
                                    <span class="report-period">Period: <span id="reportPeriod">This Month</span></span>
                                    <span class="report-total-records">Total Records: <span id="reportTotalRecords">0</span></span>
                                    <span class="report-date-range">Date Range: <span id="reportDateRange">-</span></span>
                                </div>
                            </div>

                            <!-- Summary Statistics -->
                            <div class="report-section">
                                <h3>📈 Summary Statistics</h3>
                                <div class="report-stats-grid">
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportTotalExpenses">₹0</div>
                                        <div class="stat-label">Total Expenses</div>
                                        <div class="stat-period">All Time</div>
                                    </div>
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportAvgDaily">₹0</div>
                                        <div class="stat-label">Daily Average</div>
                                        <div class="stat-period">Based on active days</div>
                                    </div>
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportTotalTransactions">0</div>
                                        <div class="stat-label">Total Transactions</div>
                                        <div class="stat-period">All Time</div>
                                    </div>
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportLargestExpense">₹0</div>
                                        <div class="stat-label">Largest Expense</div>
                                        <div class="stat-period">Single Transaction</div>
                                    </div>
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportThisMonth">₹0</div>
                                        <div class="stat-label">This Month</div>
                                        <div class="stat-period">Current Month</div>
                                    </div>
                                    <div class="report-stat-card">
                                        <div class="stat-value" id="reportLastMonth">₹0</div>
                                        <div class="stat-label">Last Month</div>
                                        <div class="stat-period">Previous Month</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Category Breakdown -->
                            <div class="report-section">
                                <h3>📋 Category Breakdown</h3>
                                <div class="category-breakdown-container">
                                    <table class="category-breakdown-table" id="categoryBreakdownTable">
                                        <thead>
                                            <tr>
                                                <th>Category</th>
                                                <th>Amount</th>
                                                <th>Transactions</th>
                                                <th>Percentage</th>
                                                <th>Avg Per Transaction</th>
                                            </tr>
                                        </thead>
                                        <tbody id="categoryBreakdownBody">
                                            <!-- Category data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Payment Method Analysis -->
                            <div class="report-section">
                                <h3>💳 Payment Method Analysis</h3>
                                <div class="payment-method-container">
                                    <table class="payment-method-table" id="paymentMethodTable">
                                        <thead>
                                            <tr>
                                                <th>Payment Method</th>
                                                <th>Amount</th>
                                                <th>Transactions</th>
                                                <th>Percentage</th>
                                                <th>Avg Per Transaction</th>
                                            </tr>
                                        </thead>
                                        <tbody id="paymentMethodBody">
                                            <!-- Payment method data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Monthly Trends -->
                            <div class="report-section">
                                <h3>📅 Monthly Trends</h3>
                                <div class="monthly-trends-container">
                                    <table class="monthly-trends-table" id="monthlyTrendsTable">
                                        <thead>
                                            <tr>
                                                <th>Month</th>
                                                <th>Total Amount</th>
                                                <th>Transactions</th>
                                                <th>Daily Average</th>
                                                <th>Change from Previous</th>
                                            </tr>
                                        </thead>
                                        <tbody id="monthlyTrendsBody">
                                            <!-- Monthly trends data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Top Expenses -->
                            <div class="report-section">
                                <h3>🔝 Top Expenses</h3>
                                <div class="top-expenses-container">
                                    <table class="top-expenses-table" id="topExpensesTable">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Description</th>
                                                <th>Category</th>
                                                <th>Payment Method</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody id="topExpensesBody">
                                            <!-- Top expenses data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Recent Transactions -->
                            <div class="report-section">
                                <h3>📝 Recent Transactions (Last 20)</h3>
                                <div class="recent-transactions-container">
                                    <table class="recent-transactions-table" id="recentTransactionsTable">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Description</th>
                                                <th>Category</th>
                                                <th>Payment Method</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentTransactionsBody">
                                            <!-- Recent transactions data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Budget Performance (if budgets are set) -->
                            <div class="report-section" id="budgetSection" style="display: none;">
                                <h3>🎯 Budget Performance</h3>
                                <div class="budget-performance-container">
                                    <table class="budget-performance-table" id="budgetPerformanceTable">
                                        <thead>
                                            <tr>
                                                <th>Category</th>
                                                <th>Budget</th>
                                                <th>Spent</th>
                                                <th>Remaining</th>
                                                <th>Progress</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="budgetPerformanceBody">
                                            <!-- Budget performance data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Add Expense Modal -->
                <div id="expenseModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="expenseModalTitle">Add New Expense</h2>
                        <form id="expenseForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expenseAmount">Amount (₹)</label>
                                    <input type="number" id="expenseAmount" placeholder="0.00" required step="0.01">
                                    <div class="smart-suggestions" id="amountSuggestions" style="display: none;"></div>
                                </div>
                                <div class="form-group">
                                    <label for="expenseDate">Date</label>
                                    <input type="date" id="expenseDate" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="food">🍕 Food & Dining</option>
                                    <option value="bills">📧 Bills & Utilities</option>
                                    <option value="shopping">🛍️ Shopping</option>
                                    <option value="travel">✈️ Travel & Transport</option>
                                    <option value="entertainment">🎭 Entertainment</option>
                                    <option value="healthcare">🏥 Healthcare</option>
                                    <option value="education">📚 Education</option>
                                    <option value="fitness">💪 Fitness & Sports</option>
                                    <option value="subscriptions">📺 Subscriptions</option>
                                    <option value="groceries">🛒 Groceries</option>
                                    <option value="clothing">👕 Clothing</option>
                                    <option value="other">📦 Other</option>
                                </select>
                                <div class="smart-category-suggestion" id="categorySuggestion" style="display: none;"></div>
                            </div>

                            <div class="form-group">
                                <label for="expenseNotes">Description</label>
                                <input type="text" id="expenseNotes" placeholder="What was this expense for?">
                                <div class="auto-complete-suggestions" id="descriptionSuggestions" style="display: none;"></div>
                            </div>

                            <div class="form-group">
                                <label for="expensePaymentMethod">Payment Method</label>
                                <select id="expensePaymentMethod">
                                    <option value="cash">💵 Cash</option>
                                    <option value="card">💳 Card</option>
                                    <option value="upi">📱 UPI</option>
                                    <option value="bank">🏦 Bank Transfer</option>
                                    <option value="wallet">📱 Digital Wallet</option>
                                </select>
                            </div>

                            <div class="expense-forecast" id="expenseForecast" style="display: none;">
                                <h4>💡 Smart Insights</h4>
                                <div class="forecast-content" id="forecastContent"></div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('expenseModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Expense</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Budget Setting Modal -->
                <div id="budgetModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Set Monthly Budget</h2>
                        <form id="budgetForm">
                            <div class="budget-categories-form" id="budgetCategoriesForm">
                                <!-- Budget categories will be generated here -->
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('budgetModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Budget</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Savings Goal Modal -->
                <div id="savingsGoalModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Set Savings Goal</h2>
                        <form id="savingsGoalForm">
                            <div class="form-group">
                                <label for="goalAmount">Monthly Savings Goal (₹)</label>
                                <input type="number" id="goalAmount" placeholder="10000" required>
                            </div>
                            <div class="form-group">
                                <label for="goalDescription">Goal Description</label>
                                <input type="text" id="goalDescription" placeholder="Emergency fund, vacation, etc.">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('savingsGoalModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Set Goal</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Monthly Income Modal -->
                <div id="incomeModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Set Monthly Income</h2>
                        <form id="incomeForm">
                            <div class="form-group">
                                <label for="monthlyIncomeAmount">Monthly Income (₹)</label>
                                <input type="number" id="monthlyIncomeAmount" placeholder="50000" required step="100">
                            </div>
                            <div class="form-group">
                                <label for="incomeSource">Primary Income Source</label>
                                <select id="incomeSource">
                                    <option value="salary">💼 Salary</option>
                                    <option value="freelance">💻 Freelance</option>
                                    <option value="business">🏢 Business</option>
                                    <option value="investment">📈 Investment</option>
                                    <option value="other">📦 Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="incomeNotes">Notes (Optional)</label>
                                <input type="text" id="incomeNotes" placeholder="Additional details about your income">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('incomeModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Income</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Recurring Expenses Management Modal -->
                <div id="recurringModal" class="modal">
                    <div class="modal-content wide-modal">
                        <span class="close">&times;</span>
                        <h2>🔄 Manage Recurring Expenses</h2>

                        <div class="recurring-tabs">
                            <button class="tab-btn active" data-tab="active-recurring">Active</button>
                            <button class="tab-btn" data-tab="paused-recurring">Paused</button>
                            <button class="tab-btn" data-tab="upcoming-recurring">Upcoming</button>
                        </div>

                        <div id="active-recurring" class="tab-content active">
                            <div class="recurring-expenses-grid" id="activeRecurringGrid">
                                <!-- Active recurring expenses will be displayed here -->
                            </div>
                        </div>

                        <div id="paused-recurring" class="tab-content">
                            <div class="recurring-expenses-grid" id="pausedRecurringGrid">
                                <!-- Paused recurring expenses will be displayed here -->
                            </div>
                        </div>

                        <div id="upcoming-recurring" class="tab-content">
                            <div class="upcoming-expenses-list" id="upcomingRecurringList">
                                <!-- Upcoming recurring expenses will be displayed here -->
                            </div>
                        </div>

                        <div class="modal-actions">
                            <button type="button" class="btn-secondary" onclick="app.closeModal('recurringModal')">Close</button>
                            <button type="button" class="btn-primary" onclick="app.openModal('expenseModal')">Add Recurring</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Food & Nutrition Section -->
            <section id="food" class="section">
                <div class="section-header">
                    <h1>🍲 Food & Nutrition Planner</h1>
                    <div class="food-header-actions">
                        <button class="btn-secondary export-btn" data-section="food" data-format="csv">📊 Export CSV</button>
                        <button class="btn-secondary export-btn" data-section="food" data-format="json">📄 Export JSON</button>
                        <button class="btn-secondary" id="addMealBtn">+ Add Meal</button>
                        <button class="btn-secondary" id="viewMealCalendarBtn">📅 Meal Calendar</button>
                        <button class="btn-primary" id="addFoodBtn">+ Add Food Item</button>
                    </div>
                </div>

                <div class="food-stats">
                    <div class="stat-card">
                        <span id="homeMeals">0</span>
                        <label>Home Meals</label>
                    </div>
                    <div class="stat-card">
                        <span id="hotelMeals">0</span>
                        <label>Hotel/Delivery</label>
                    </div>
                    <div class="stat-card">
                        <span id="moneySaved">₹0</span>
                        <label>Money Saved</label>
                    </div>
                    <div class="stat-card">
                        <span id="caloriesConsumed">0</span>
                        <label>Calories Today</label>
                    </div>
                </div>

                <!-- Daily Food Tracking -->
                <div class="daily-food-tracking">
                    <h3>📊 Daily Food Tracking</h3>
                    <div class="food-tracking-tabs">
                        <button class="tab-btn active" data-tab="today-food">Today</button>
                        <button class="tab-btn" data-tab="yesterday-food">Yesterday</button>
                        <button class="tab-btn" data-tab="weekly-food">This Week</button>
                    </div>

                    <div id="today-food" class="tab-content active">
                        <div class="daily-summary">
                            <div class="summary-cards">
                                <div class="summary-card home-cooking">
                                    <h4>🏠 Home Cooked</h4>
                                    <div class="summary-stats">
                                        <span class="count" id="todayHomeMeals">0</span>
                                        <span class="calories" id="todayHomeCalories">0 cal</span>
                                        <span class="cost" id="todayHomeCost">₹0</span>
                                    </div>
                                </div>
                                <div class="summary-card hotel-delivery">
                                    <h4>🏨 Hotel/Delivery</h4>
                                    <div class="summary-stats">
                                        <span class="count" id="todayHotelMeals">0</span>
                                        <span class="calories" id="todayHotelCalories">0 cal</span>
                                        <span class="cost" id="todayHotelCost">₹0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="meals-list" id="todayMealsList">
                            <!-- Today's meals will be listed here -->
                        </div>
                    </div>

                    <div id="yesterday-food" class="tab-content">
                        <div class="meals-list" id="yesterdayMealsList">
                            <!-- Yesterday's meals will be listed here -->
                        </div>
                    </div>

                    <div id="weekly-food" class="tab-content">
                        <div class="weekly-analysis" id="weeklyFoodAnalysis">
                            <!-- Weekly food analysis will be shown here -->
                        </div>
                    </div>
                </div>

                <div class="meal-planner">
                    <div class="meal-planner-header">
                        <h3>📅 Daily Meal Planner</h3>
                        <div class="date-selector">
                            <button class="btn-small" onclick="app.changeMealPlanDate(-1)">← Yesterday</button>
                            <span id="currentPlanDate">Today</span>
                            <button class="btn-small" onclick="app.changeMealPlanDate(1)">Tomorrow →</button>
                        </div>
                    </div>
                    <div class="meal-grid" id="mealPlanGrid">
                        <!-- Meal cards will be dynamically generated -->
                    </div>
                    <div class="meal-actions">
                        <button class="btn-secondary" onclick="app.regenerateMealPlan()">🔄 Regenerate Suggestions</button>
                        <button class="btn-primary" onclick="app.addCustomMeal()">+ Add Custom Meal</button>
                    </div>
                </div>


                <!-- Home vs Hotel Analysis -->
                <div class="home-vs-hotel-analysis">
                    <h3>🏠 Home vs 🏨 Hotel Analysis</h3>
                    <div class="analysis-grid">
                        <div class="chart-container">
                            <h4>Cooking Frequency (Last 7 Days)</h4>
                            <canvas id="cookingFrequencyChart" width="400" height="250"></canvas>
                        </div>
                        <div class="chart-container">
                            <h4>Cost Comparison</h4>
                            <canvas id="costComparisonChart" width="400" height="250"></canvas>
                        </div>
                    </div>
                    <div class="comparison-insights" id="comparisonInsights">
                        <!-- Dynamic insights will be generated here -->
                    </div>
                </div>

                <!-- Food Analytics Dashboard -->
                <div class="food-analytics-section">
                    <h3>📊 Food Analytics & Insights</h3>

                    <div class="nutrition-overview">
                        <div class="nutrition-stats-grid">
                            <div class="nutrition-stat">
                                <div class="nutrition-value" id="weeklyCalories">14,700</div>
                                <div class="nutrition-label">Weekly Calories</div>
                                <div class="nutrition-change positive" id="calorieChange">+5%</div>
                            </div>
                            <div class="nutrition-stat">
                                <div class="nutrition-value" id="avgMealCost">₹45</div>
                                <div class="nutrition-label">Avg Meal Cost</div>
                                <div class="nutrition-change negative" id="costChange">-8%</div>
                            </div>
                            <div class="nutrition-stat">
                                <div class="nutrition-value" id="homeCookingDays">5/7</div>
                                <div class="nutrition-label">Home Cooking Days</div>
                                <div class="nutrition-change positive" id="cookingChange">+2</div>
                            </div>
                            <div class="nutrition-stat">
                                <div class="nutrition-value" id="southIndianMeals">12</div>
                                <div class="nutrition-label">South Indian Meals</div>
                                <div class="nutrition-change positive" id="southIndianChange">+4</div>
                            </div>
                        </div>
                    </div>

                    <div class="food-charts-grid">
                        <div class="chart-container">
                            <h4>Daily Calorie Intake (Last 7 Days)</h4>
                            <canvas id="calorieChart" width="400" height="250"></canvas>
                        </div>
                        <div class="chart-container">
                            <h4>Meal Cost vs Delivery Comparison</h4>
                            <canvas id="mealCostChart" width="400" height="250"></canvas>
                        </div>
                    </div>

                    <div class="food-insights">
                    <h4>🧠 Smart Food Insights</h4>
                    <div class="insights-grid" id="foodInsightsList">
                        <div class="insight-card">
                            <div class="insight-icon">🥥</div>
                            <div class="insight-content">
                                <h5>South Indian Preference</h5>
                                <p>You've had 12 South Indian meals this week. Your favorite seems to be dosa-based breakfasts!</p>
                            </div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-icon">💰</div>
                            <div class="insight-content">
                                <h5>Cost Savings</h5>
                                <p>Cooking at home saved you ₹1,200 this week compared to ordering food delivery.</p>
                            </div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-icon">💡</div>
                            <div class="insight-content">
                                <h5>Calorie Balance</h5>
                                <p>Your daily calorie intake is well-balanced at 2,100 calories on average.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Meal History Section -->
                <div class="meal-history-section">
                    <h4>📋 Recent Meals</h4>
                    <div id="mealHistoryContainer">
                        <!-- Meal history will be loaded here -->
                    </div>
                </div>
                </div>

                <div class="pantry-section">
                    <h3>Your Pantry</h3>
                    <div class="pantry-list" id="pantryList">
                        <!-- Pantry items will be added here -->
                    </div>
                </div>

                <!-- Add Meal Modal -->
                <div id="mealModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Add Meal</h2>
                        <form id="mealForm">
                            <div class="form-group">
                                <label for="mealName">Meal Name</label>
                                <input type="text" id="mealName" placeholder="e.g., Chicken Biryani" required>
                            </div>

                            <div class="form-group">
                                <label for="mealType">Meal Type</label>
                                <select id="mealType" required>
                                    <option value="">Select meal type</option>
                                    <option value="breakfast">🌅 Breakfast</option>
                                    <option value="lunch">🌞 Lunch</option>
                                    <option value="dinner">🌙 Dinner</option>
                                    <option value="snack">🥨 Snack</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="mealCalories">Calories</label>
                                <input type="number" id="mealCalories" placeholder="e.g., 450" required min="1">
                            </div>

                            <div class="form-group">
                                <label>Where did you have this meal?</label>
                                <div class="meal-source-options">
                                    <button type="button" class="source-option" data-source="home" id="homeOption">
                                        <span class="icon">🏠</span>
                                        <span>Cook at Home</span>
                                    </button>
                                    <button type="button" class="source-option" data-source="hotel" id="hotelOption">
                                        <span class="icon">����</span>
                                        <span>Hotel/Delivery</span>
                                    </button>
                                </div>
                            </div>

                            <div id="homeCookingDetails" class="cooking-details" style="display: none;">
                                <div class="form-group">
                                    <label for="ingredientCost">Ingredient Cost (₹)</label>
                                    <input type="number" id="ingredientCost" placeholder="e.g., 50" step="0.01" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="cookingTime">Cooking Time (minutes)</label>
                                    <input type="number" id="cookingTime" placeholder="e.g., 30" min="1">
                                </div>
                            </div>

                            <div id="hotelDetails" class="cooking-details" style="display: none;">
                                <div class="form-group">
                                    <label for="mealCost">Meal Cost (₹)</label>
                                    <input type="number" id="mealCost" placeholder="e.g., 150" step="0.01" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="deliveryCharges">Delivery/Transportation Charges (₹)</label>
                                    <input type="number" id="deliveryCharges" placeholder="e.g., 25" step="0.01" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="restaurantName">Restaurant/Hotel Name</label>
                                    <input type="text" id="restaurantName" placeholder="e.g., Saravana Bhavan">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="mealDate">Date</label>
                                <input type="date" id="mealDate" required>
                            </div>

                            <div class="form-group">
                                <label>Meal Status</label>
                                <div class="meal-status-options">
                                    <button type="button" class="status-option active" data-status="eaten" id="eatenOption">
                                        <span class="icon">✅</span>
                                        <span>Already Eaten</span>
                                    </button>
                                    <button type="button" class="status-option" data-status="planned" id="plannedOption">
                                        <span class="icon">📅</span>
                                        <span>Plan for Later</span>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="mealNotes">Notes (Optional)</label>
                                <textarea id="mealNotes" placeholder="How was the meal? Any special ingredients?"></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('mealModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Meal</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Meal Selection Modal -->
                <div id="mealSelectionModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="mealSelectionTitle">Select Meal Options</h2>

                        <div class="meal-selection-content">
                            <div class="suggested-meal-info">
                                <div class="meal-name" id="selectedMealName">Dosa with Chutney</div>
                                <div class="meal-meta">
                                    <span id="selectedMealCalories">280 cal</span>
                                    <span id="selectedMealType">Breakfast</span>
                                </div>
                            </div>

                            <div class="meal-options">
                                <h4>Where will you have this meal?</h4>
                                <div class="source-selection">
                                    <button class="source-btn" data-source="home" id="homeSourceBtn">
                                        <span class="icon">🏠</span>
                                        <span>Cook at Home</span>
                                    </button>
                                    <button class="source-btn" data-source="hotel" id="hotelSourceBtn">
                                        <span class="icon">🏨</span>
                                        <span>Order/Hotel</span>
                                    </button>
                                </div>

                                <div id="homeCookingOptions" class="cooking-options" style="display: none;">
                                    <label for="homeEstimatedCost">Estimated Ingredient Cost (₹)</label>
                                    <input type="number" id="homeEstimatedCost" placeholder="e.g., 50" step="0.01">
                                </div>

                                <div id="hotelOrderOptions" class="cooking-options" style="display: none;">
                                    <label for="hotelEstimatedCost">Estimated Cost (₹)</label>
                                    <input type="number" id="hotelEstimatedCost" placeholder="e.g., 150" step="0.01">
                                    <label for="deliveryEstimate">Delivery Charges (₹)</label>
                                    <input type="number" id="deliveryEstimate" placeholder="e.g., 25" step="0.01">
                                </div>

                                <h4 style="margin-top: 20px;">Meal Status</h4>
                                <div class="status-selection">
                                    <button class="status-btn active" data-status="planned" id="plannedStatusBtn">
                                        <span class="icon">📅</span>
                                        <span>Planned</span>
                                    </button>
                                    <button class="status-btn" data-status="eaten" id="eatenStatusBtn">
                                        <span class="icon">✅</span>
                                        <span>Eaten</span>
                                    </button>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('mealSelectionModal')">Cancel</button>
                                <button type="button" class="btn-primary" onclick="app.confirmMealSelection()">Confirm Selection</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Regenerate Meal Plan Modal -->
                <div id="regenerateMealModal" class="modal">
                    <div class="modal-content wide-modal">
                        <span class="close">&times;</span>
                        <h2>🔄 Random Meal Suggestions</h2>

                        <div class="regenerate-content">
                            <p>Accept any meal you like or regenerate for new options. Only empty meal slots are suggested:</p>

                            <div class="meal-suggestions-grid" id="mealSuggestionsGrid">
                                <!-- Meal suggestions will be generated here -->
                            </div>

                            <div class="regenerate-actions">
                                <button class="btn-secondary" onclick="app.regenerateMoreSuggestions()">🎲 Show More Options</button>
                                <button class="btn-primary" onclick="app.closeModal('regenerateMealModal')">Done</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Food Item Modal -->
                <div id="foodModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Add Food Item to Pantry</h2>
                        <form id="foodForm">
                            <div class="form-group">
                                <label for="foodName">Food Item Name</label>
                                <input type="text" id="foodName" placeholder="e.g., Basmati Rice" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="foodQuantity">Quantity</label>
                                    <input type="number" id="foodQuantity" placeholder="e.g., 5" required step="0.01" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="foodUnit">Unit</label>
                                    <select id="foodUnit">
                                        <option value="kg">kg</option>
                                        <option value="g">g</option>
                                        <option value="pieces">pieces</option>
                                        <option value="liters">liters</option>
                                        <option value="ml">ml</option>
                                        <option value="packets">packets</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="foodCaloriesPer100g">Calories per 100g/100ml</label>
                                <input type="number" id="foodCaloriesPer100g" placeholder="e.g., 130" required min="1">
                            </div>
                            <div class="form-group">
                                <label for="foodExpiry">Expiry Date</label>
                                <input type="date" id="foodExpiry">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('foodModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Add to Pantry</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Meal Calendar Modal -->
                <div id="mealCalendarModal" class="modal">
                    <div class="modal-content wide-modal">
                        <span class="close">&times;</span>
                        <h2>📅 Meal Calendar</h2>

                        <div class="calendar-container">
                            <div class="calendar-header">
                                <button class="btn-small" onclick="app.navigateMealCalendar('prev')">‹</button>
                                <h3 id="mealCalendarTitle">September 2024</h3>
                                <button class="btn-small" onclick="app.navigateMealCalendar('next')">›</button>
                            </div>

                            <div class="meal-calendar" id="mealCalendar">
                                <!-- Calendar will be rendered here -->
                            </div>

                            <div class="calendar-legend">
                                <div class="legend-item">
                                    <span class="meal-dot planned">•</span> Planned
                                </div>
                                <div class="legend-item">
                                    <span class="meal-dot eaten">•</span> Eaten
                                </div>
                                <div class="legend-item">
                                    <span class="meal-dot empty">•</span> Not planned
                                </div>
                            </div>
                        </div>

                        <div class="selected-date-info">
                            <h4 id="selectedMealDate">Select a date to view meals</h4>
                            <div class="selected-meals-list" id="selectedMealsList">
                                <!-- Selected date meals will be displayed here -->
                            </div>
                        </div>

                        <div class="modal-actions">
                            <button type="button" class="btn-secondary" onclick="app.closeModal('mealCalendarModal')">Close</button>
                            <button type="button" class="btn-primary" onclick="app.addCustomMeal()">Add Meal</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fitness Section -->
            <section id="fitness" class="section">
                <div class="section-header">
                    <h1>🏋️ Fitness & Home Workouts</h1>
                    <div class="header-actions">
                        <button class="btn-secondary export-btn" data-section="fitness" data-format="csv">📈 Export CSV</button>
                        <button class="btn-secondary export-btn" data-section="fitness" data-format="json">📄 Export JSON</button>
                    </div>
                </div>

                <div class="fitness-stats">
                    <div class="stat-card">
                        <span id="fitnessStreak">0</span>
                        <label>Day Streak 🔥</label>
                    </div>
                    <div class="stat-card">
                        <span id="weeklyWorkouts">4/7</span>
                        <label>This Week</label>
                    </div>
                    <div class="stat-card">
                        <span id="totalWorkouts">25</span>
                        <label>Total Workouts</label>
                    </div>
                    <div class="stat-card">
                        <span id="totalCaloriesBurnt">0</span>
                        <label>Total Calories 🔥</label>
                    </div>
                </div>

                <div class="workout-categories">
                    <h3>Today's Recommended Exercises</h3>
                    <div class="exercise-grid">
                        <div class="exercise-card" data-exercise="desk-stretches">
                            <h4>🪑 Desk Stretches</h4>
                            <p>5-minute neck and shoulder relief</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="eye-exercises">
                            <h4>👀 Eye Exercises</h4>
                            <p>Reduce eye strain from screens</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="posture-fix">
                            <h4>🧍 Posture Fix</h4>
                            <p>Improve sitting posture</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="yoga">
                            <h4>🧘 5-min Yoga</h4>
                            <p>Quick relaxation routine</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="breathing">
                            <h4>🫁 Deep Breathing</h4>
                            <p>3-minute stress relief breathing</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="wall-pushups">
                            <h4>🚪 Wall Push-ups</h4>
                            <p>Easy strength exercise anywhere</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="calf-raises">
                            <h4>🦵 Calf Raises</h4>
                            <p>Improve circulation while standing</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="arm-circles">
                            <h4>💪 Arm Circles</h4>
                            <p>Shoulder mobility and warm-up</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="seated-twists">
                            <h4>🔄 Seated Spinal Twists</h4>
                            <p>Reduce back tension while sitting</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="march-in-place">
                            <h4>🚶 March in Place</h4>
                            <p>Quick cardio boost at your desk</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="ankle-pumps">
                            <h4>🦶 Ankle Pumps</h4>
                            <p>Combat sitting all day</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                        <div class="exercise-card" data-exercise="chair-squats">
                            <h4>🪑 Chair Squats</h4>
                            <p>Leg strength using your chair</p>
                            <button class="btn-secondary">Start Exercise</button>
                        </div>
                    </div>
                </div>

                <div class="badges-section">
                    <h3>Achievement Badges</h3>
                    <div class="badges-grid" id="badgesList">
                        <!-- Fitness Badges -->
                        <div class="badge locked" data-badge="firstWorkout">
                            <span>🏆</span>
                            <p>First Workout</p>
                            <small>Complete your first exercise</small>
                        </div>
                        <div class="badge locked" data-badge="sevenDayStreak">
                            <span>🔥</span>
                            <p>7-Day Streak</p>
                            <small>Workout for 7 consecutive days</small>
                        </div>
                        <div class="badge locked" data-badge="consistencyKing">
                            <span>👑</span>
                            <p>Consistency King</p>
                            <small>20 workouts in 28 days</small>
                        </div>
                        <div class="badge locked" data-badge="exerciseExplorer">
                            <span>🧭</span>
                            <p>Exercise Explorer</p>
                            <small>Try 8 different exercises</small>
                        </div>
                        <div class="badge locked" data-badge="timerMaster">
                            <span>⏰</span>
                            <p>Timer Master</p>
                            <small>Complete 10 timed exercises</small>
                        </div>

                        <!-- Food & Nutrition Badges -->
                        <div class="badge locked" data-badge="southIndianFoodie">
                            <span>🥥</span>
                            <p>South Indian Foodie</p>
                            <small>Cook 10 South Indian dishes</small>
                        </div>
                        <div class="badge locked" data-badge="calorieTracker">
                            <span>📊</span>
                            <p>Calorie Tracker</p>
                            <small>Track calories for 7 days</small>
                        </div>
                        <div class="badge locked" data-badge="homeCookChampion">
                            <span>👨‍🍳</span>
                            <p>Home Cook Champion</p>
                            <small>Cook at home 15 days</small>
                        </div>
                        <div class="badge locked" data-badge="nutritionExpert">
                            <span>🥗</span>
                            <p>Nutrition Expert</p>
                            <small>Maintain healthy eating for 30 days</small>
                        </div>
                        <div class="badge locked" data-badge="mealPlanMaster">
                            <span>📋</span>
                            <p>Meal Plan Master</p>
                            <small>Plan meals for 14 days</small>
                        </div>
                        <div class="badge locked" data-badge="healthyChoice">
                            <span>🥗</span>
                            <p>Healthy Choice</p>
                            <small>Choose healthy options 20 times</small>
                        </div>

                        <!-- Habit & Lifestyle Badges -->
                        <div class="badge locked" data-badge="wellnessWarrior">
                            <span>🧘</span>
                            <p>Wellness Warrior</p>
                            <small>Complete stress relief 10 times</small>
                        </div>

                        <!-- Financial Badges -->
                        <div class="badge locked" data-badge="budgetBoss">
                            <span>💰</span>
                            <p>Budget Boss</p>
                            <small>Stay within budget for a month</small>
                        </div>
                        <div class="badge locked" data-badge="savingsChampion">
                            <span>💎</span>
                            <p>Savings Champion</p>
                            <small>Save 20% of income</small>
                        </div>
                        <div class="badge locked" data-badge="expenseTracker">
                            <span>📈</span>
                            <p>Expense Tracker</p>
                            <small>Track expenses for 30 days</small>
                        </div>

                        <!-- Productivity Badges -->
                        <div class="badge locked" data-badge="taskMaster">
                            <span>✅</span>
                            <p>Task Master</p>
                            <small>Complete 50 tasks</small>
                        </div>
                        <div class="badge locked" data-badge="weeklyChampion">
                            <span>🗓️</span>
                            <p>Weekly Champion</p>
                            <small>100% task completion for a week</small>
                        </div>
                        <div class="badge locked" data-badge="organizer">
                            <span>📊</span>
                            <p>Organizer</p>
                            <small>Use all sections of the app</small>
                        </div>

                        <!-- Tougher Achievement Badges -->
                        <div class="badge locked" data-badge="ironWill">
                            <span>���️</span>
                            <p>Iron Will</p>
                            <small>30-day workout streak</small>
                        </div>
                        <div class="badge locked" data-badge="marathonWarrior">
                            <span>🏃‍♂️</span>
                            <p>Marathon Warrior</p>
                            <small>Complete 100 workouts total</small>
                        </div>
                        <div class="badge locked" data-badge="zealot">
                            <span>⚡</span>
                            <p>Fitness Zealot</p>
                            <small>Work out every day for 60 days</small>
                        </div>
                        <div class="badge locked" data-badge="masterChef">
                            <span>👑</span>
                            <p>Master Chef</p>
                            <small>Cook at home 90% of meals for 30 days</small>
                        </div>
                        <div class="badge locked" data-badge="frugalityKing">
                            <span>💎</span>
                            <p>Frugality King</p>
                            <small>Save 50% of income for 3 months</small>
                        </div>
                        <div class="badge locked" data-badge="budgetNinja">
                            <span>🥷</span>
                            <p>Budget Ninja</p>
                            <small>Stay under budget in ALL categories for 6 months</small>
                        </div>
                        <div class="badge locked" data-badge="taskTerminator">
                            <span>🤖</span>
                            <p>Task Terminator</p>
                            <small>Complete 500 tasks total</small>
                        </div>
                        <div class="badge locked" data-badge="perfectionist">
                            <span>💯</span>
                            <p>Perfectionist</p>
                            <small>100% task completion for 30 days straight</small>
                        </div>
                        <div class="badge locked" data-badge="zenMaster">
                            <span>☯️</span>
                            <p>Zen Master</p>
                            <small>Log mood daily for 100 days straight</small>
                        </div>
                        <div class="badge locked" data-badge="stressSlayer">
                            <span>🗡️</span>
                            <p>Stress Slayer</p>
                            <small>Complete 50 stress relief sessions</small>
                        </div>
                        <div class="badge locked" data-badge="ultraConsistent">
                            <span>⭐</span>
                            <p>Ultra Consistent</p>
                            <small>Use app daily for 6 months straight</small>
                        </div>
                        <div class="badge locked" data-badge="lifestyleMaster">
                            <span>🌟</span>
                            <p>Lifestyle Master</p>
                            <small>Maintain all habits for 365 days</small>
                        </div>
                        <div class="badge locked" data-badge="dataGenius">
                            <span>📄</span>
                            <p>Data Genius</p>
                            <small>Track every meal, expense, and workout for 90 days</small>
                        </div>
                        <div class="badge locked" data-badge="financialGuru">
                            <span>💰</span>
                            <p>Financial Guru</p>
                            <small>Achieve positive cash flow for 12 months</small>
                        </div>
                        <div class="badge locked" data-badge="epicTransformation">
                            <span>🦋</span>
                            <p>Epic Transformation</p>
                            <small>Complete all other achievements</small>
                        </div>
                    </div>
                </div>

                <!-- Exercise Modal -->
                <div id="exerciseModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="exerciseTitle">Exercise</h2>

                        <!-- Timer Section -->
                        <div class="exercise-timer-section" id="exerciseTimerSection" style="display: none;">
                            <div class="timer-circle">
                                <div class="timer-display" id="timerDisplay">00:00</div>
                                <div class="timer-label">Time Remaining</div>
                            </div>
                            <div class="timer-controls">
                                <button class="btn-secondary" id="startTimerBtn">Start Timer</button>
                                <button class="btn-secondary" id="pauseTimerBtn" style="display: none;">Pause</button>
                                <button class="btn-secondary" id="resetTimerBtn" style="display: none;">Reset</button>
                            </div>
                            <div class="timer-progress-bar">
                                <div class="timer-progress-fill" id="timerProgressFill"></div>
                            </div>
                        </div>

                        <div id="exerciseInstructions">
                            <!-- Exercise instructions will be loaded here -->
                        </div>

                        <div class="exercise-modal-actions">
                            <button class="btn-primary" id="completeExerciseBtn">Mark as Complete</button>
                            <button class="btn-secondary" id="skipExerciseBtn">Skip Exercise</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Stress & Mood Section -->
            <section id="stress" class="section">
                <div class="section-header">
                    <h1>😌 Stress & Mood Tracker</h1>
                    <div class="header-actions">
                        <button class="btn-secondary export-btn" data-section="stress" data-format="csv">📊 Export CSV</button>
                        <button class="btn-secondary export-btn" data-section="stress" data-format="json">📄 Export JSON</button>
                    </div>
                </div>

                <div class="mood-stats">
                    <div class="stat-card">
                        <span id="currentStress">😐</span>
                        <label>Today's Mood</label>
                    </div>
                    <div class="stat-card">
                        <span id="weeklyMoodAverage">😊</span>
                        <label>Weekly Average</label>
                    </div>
                    <div class="stat-card">
                        <span id="moodStreak">0</span>
                        <label>Happy Days Streak</label>
                    </div>
                    <div class="stat-card">
                        <span id="stressLevel">Low</span>
                        <label>Stress Level</label>
                    </div>
                </div>

                <div class="mood-chart">
                    <h3>Weekly Mood Trend</h3>
                    <canvas id="moodChart" width="600" height="300"></canvas>
                </div>

                <div class="automated-info-card">
                    <h3>🤖 Automated Tracking</h3>
                    <p>Your mood is automatically calculated daily based on your activities. Factors include task completion, workouts, spending, cooking habits, and day patterns.</p>
                    <div class="mood-insight" id="currentMoodText">
                        Calculating today's mood based on your activities...
                    </div>
                </div>

                <div class="insights-section">
                    <h3>🧠 Insights & Correlations</h3>
                    <div class="insight-cards" id="insightCards">
                        <div class="insight-card">
                            <h4>💰 Spending Pattern</h4>
                            <p>You tend to be more stressed on days with higher spending</p>
                        </div>
                        <div class="insight-card">
                            <h4>🏋️ Workout Impact</h4>
                            <p>Your mood is 30% better on workout days</p>
                        </div>
                    </div>
                </div>

                <div class="stress-relief">
                    <h3>🌈 Stress Relief Suggestions</h3>
                    <div class="relief-options">
                        <button class="relief-btn" id="breathingBtn">🫁 Breathing Exercise</button>
                        <button class="relief-btn" id="meditationBtn">🧘 5-min Meditation</button>
                        <button class="relief-btn" id="stretchBtn">🤸 Stand & Stretch</button>
                    </div>
                </div>

                <!-- Breathing Exercise Modal -->
                <div id="breathingModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>��� Breathing Exercise</h2>
                        <div class="breathing-circle" id="breathingCircle">
                            <div class="circle"></div>
                            <p id="breathingText">Click Start to begin</p>
                        </div>
                        <button class="btn-primary" id="startBreathingBtn">Start Exercise</button>
                    </div>
                </div>
            </section>

            <!-- Insights & Analysis Section -->
            <section id="games" class="section">
                <div class="section-header">
                    <h1>🎮 Games & Puzzles</h1>
                    <div class="header-actions">
                        <button class="btn-secondary export-btn" data-section="games" data-format="csv">📊 Export Stats</button>
                        <button class="btn-secondary" id="gameStatsBtn">📈 View Analytics</button>
                        <button class="btn-primary" id="newGameBtn">🎲 Random Game</button>
                    </div>
                </div>

                <!-- Life Balance Overview -->
                <!-- Game Statistics Overview -->
                <div class="game-stats-overview">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span id="totalGamesPlayed">0</span>
                            <label>Games Played</label>
                        </div>
                        <div class="stat-card">
                            <span id="gameStreak">0</span>
                            <label>Daily Streak</label>
                        </div>
                        <div class="stat-card">
                            <span id="totalScore">0</span>
                            <label>Total Score</label>
                        </div>
                        <div class="stat-card">
                            <span id="averageTime">0:00</span>
                            <label>Avg Time</label>
                        </div>
                    </div>
                </div>

                <!-- Games Grid -->
                <div class="games-grid">
                    <!-- 5 Queens with Colors Puzzle -->
                    <div class="game-card" data-game="8queens">
                        <div class="game-icon">🌈♛</div>
                        <div class="game-info">
                            <h3>5 Queens with Colors</h3>
                            <p>Place 5 queens on colored squares with hints for wrong placements. Easier and more fun!</p>
                            <div class="game-meta">
                                <span class="difficulty">🟡 Medium</span>
                                <span class="play-time">⏱️ 5-15 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="queens-best-score">Best Score: --</span>
                                <span id="queens-attempts">Attempts: 0</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('8queens')">Play</button>
                    </div>

                    <!-- Sudoku -->
                    <div class="game-card" data-game="sudoku">
                        <div class="game-icon">🔢</div>
                        <div class="game-info">
                            <h3>Sudoku</h3>
                            <p>Fill the 9×9 grid with digits so each column, row, and 3×3 box contains all digits 1-9</p>
                            <div class="game-meta">
                                <span class="difficulty">🟢 Easy-Hard</span>
                                <span class="play-time">⏱️ 10-30 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="sudoku-completed">Completed: 0</span>
                                <span id="sudoku-best-time">Best: --</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('sudoku')">Play</button>
                    </div>

                    <!-- Color Pattern Game -->
                    <div class="game-card" data-game="colorpattern">
                        <div class="game-icon">🌈</div>
                        <div class="game-info">
                            <h3>Color Pattern</h3>
                            <p>Watch the sequence of colors and repeat them back. How far can you get?</p>
                            <div class="game-meta">
                                <span class="difficulty">🟢 Easy</span>
                                <span class="play-time">⏱️ 3-10 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="colorpattern-best-level">Best Level: 0</span>
                                <span id="colorpattern-best-score">Best Score: 0</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('colorpattern')">Play</button>
                    </div>

                    <!-- 2048 -->
                    <div class="game-card" data-game="2048">
                        <div class="game-icon">2️⃣</div>
                        <div class="game-info">
                            <h3>2048</h3>
                            <p>Slide tiles to combine numbers and reach the 2048 tile</p>
                            <div class="game-meta">
                                <span class="difficulty">🟡 Medium</span>
                                <span class="play-time">⏱️ 5-20 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="2048-high-score">High Score: 0</span>
                                <span id="2048-best-tile">Best Tile: 0</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('2048')">Play</button>
                    </div>

                    <!-- Memory Card Game -->
                    <div class="game-card" data-game="memory">
                        <div class="game-icon">🧠</div>
                        <div class="game-info">
                            <h3>Memory Cards</h3>
                            <p>Flip cards to find matching pairs. Test your memory skills!</p>
                            <div class="game-meta">
                                <span class="difficulty">🟢 Easy</span>
                                <span class="play-time">⏱️ 3-8 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="memory-best-moves">Best: -- moves</span>
                                <span id="memory-completed">Completed: 0</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('memory')">Play</button>
                    </div>

                    <!-- Snake Game -->
                    <div class="game-card" data-game="snake">
                        <div class="game-icon">🐍</div>
                        <div class="game-info">
                            <h3>Snake Game</h3>
                            <p>Control the snake to eat food and grow longer without hitting walls or yourself</p>
                            <div class="game-meta">
                                <span class="difficulty">🟡 Medium</span>
                                <span class="play-time">⏱️ 2-15 min</span>
                            </div>
                            <div class="game-stats">
                                <span id="snake-high-score">High Score: 0</span>
                                <span id="snake-longest">Longest: 0</span>
                            </div>
                        </div>
                        <button class="btn-primary game-play-btn" onclick="app.startGame('snake')">Play</button>
                    </div>
                </div>




                <!-- Recommendations Tab -->
                <div id="recommendations" class="tab-content">
                    <div class="recommendations-grid">
                        <div class="recommendation-container">
                            <h3>🌟 Top Performing Areas</h3>
                            <div class="performance-highlights" id="performanceHighlights">
                                <!-- Performance highlights will be shown here -->
                            </div>
                        </div>

                        <div class="recommendation-container">
                            <h3>🔧 Areas for Improvement</h3>
                            <div class="improvement-areas" id="improvementAreas">
                                <!-- Improvement areas will be shown here -->
                            </div>
                        </div>

                        <div class="recommendation-container">
                            <h3>💡 Personalized Suggestions</h3>
                            <div class="smart-recommendations" id="smartRecommendations">
                                <!-- Smart recommendations will be shown here -->
                            </div>
                        </div>

                        <div class="recommendation-container">
                            <h3>🎯 Action Plan</h3>
                            <div class="action-plan" id="actionPlan">
                                <!-- Action plan will be shown here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Analysis Tab -->
                <div id="progress-analysis" class="tab-content">
                    <div class="progress-overview">
                        <h3>📈 Overall Progress Tracking</h3>
                        <div class="progress-metrics" id="progressMetrics">
                            <!-- Progress metrics will be displayed here -->
                        </div>
                    </div>

                    <div class="progress-trends">
                        <h3>📊 Trend Analysis</h3>
                        <div class="chart-container">
                            <h4>Monthly Progress Trends</h4>
                            <canvas id="progressTrendsChart" width="600" height="300"></canvas>
                        </div>
                        <div class="progress-insights" id="progressInsights">
                            <!-- Progress insights will be shown here -->
                        </div>
                    </div>
                </div>

                <!-- Game Modals -->

                <!-- 5 Queens with Colors Game Modal -->
                <div id="queensGameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>🌈♛ 5 Queens with Colors</h2>
                            <div class="game-controls">
                                <span id="queensTimer">00:00</span>
                                <span id="queensScore">Score: 100</span>
                                <button class="btn-secondary" id="queensHintBtn">💡 Hint</button>
                                <button class="btn-secondary" id="queensResetBtn">🔄 Reset</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div class="board-container">
                                <div id="queensBoard" class="queens-colored-board">
                                    <!-- 5x5 colored chessboard will be generated here -->
                                </div>
                                <div class="board-legend">
                                    <h4>Color Legend</h4>
                                    <div id="colorLegend" class="color-legend-grid">
                                        <!-- Color legend will be generated here -->
                                    </div>
                                </div>
                            </div>
                            <div class="game-sidebar">
                                <div class="game-info">
                                    <h4>🎯 Rules</h4>
                                    <ul>
                                        <li>Place 5 queens on different colored squares</li>
                                        <li>No two queens on same row/column</li>
                                        <li>Each queen must be on a unique color</li>
                                        <li>No adjacent diagonal attacks (distance = 1)</li>
                                        <li>Red outline = wrong position vs. solution</li>
                                    </ul>
                                </div>
                                <div class="game-progress">
                                    <div class="progress-stat">
                                        <span class="stat-label">Queens placed:</span>
                                        <span id="queensPlaced">0</span>/5
                                    </div>
                                    <div class="progress-stat">
                                        <span class="stat-label">Unique colors:</span>
                                        <span id="uniqueColors">0</span>/5
                                    </div>
                                    <div class="progress-stat">
                                        <span class="stat-label">Conflicts:</span>
                                        <span id="queensConflicts">0</span>
                                    </div>
                                    <div class="progress-stat">
                                        <span class="stat-label">Score:</span>
                                        <span id="currentScore">100</span>
                                    </div>
                                </div>
                                <div class="hints-section" id="hintsSection" style="display: none;">
                                    <h4>💡 Hint</h4>
                                    <div id="hintMessage" class="hint-message">
                                        <!-- Hint will appear here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sudoku Game Modal -->
                <div id="sudokuGameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>🔢 Sudoku</h2>
                            <div class="game-controls">
                                <select id="sudokuDifficulty">
                                    <option value="easy">Easy</option>
                                    <option value="medium">Medium</option>
                                    <option value="hard">Hard</option>
                                </select>
                                <span id="sudokuTimer">00:00</span>
                                <button class="btn-secondary" id="sudokuHintBtn">💡 Hint</button>
                                <button class="btn-secondary" id="sudokuCheckBtn">✓ Check</button>
                                <button class="btn-secondary" id="sudokuNewBtn">🎲 New Game</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div id="sudokuBoard" class="sudoku-board">
                                <!-- 9x9 sudoku grid will be generated here -->
                            </div>
                            <div class="number-pad">
                                <div class="number-grid">
                                    <button class="number-btn" data-number="1">1</button>
                                    <button class="number-btn" data-number="2">2</button>
                                    <button class="number-btn" data-number="3">3</button>
                                    <button class="number-btn" data-number="4">4</button>
                                    <button class="number-btn" data-number="5">5</button>
                                    <button class="number-btn" data-number="6">6</button>
                                    <button class="number-btn" data-number="7">7</button>
                                    <button class="number-btn" data-number="8">8</button>
                                    <button class="number-btn" data-number="9">9</button>
                                    <button class="number-btn erase-btn" data-number="0">⌫</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Color Pattern Game Modal -->
                <div id="colorPatternGameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>🌈 Color Pattern</h2>
                            <div class="game-controls">
                                <span id="colorPatternLevel">Level: 1</span>
                                <span id="colorPatternScore">Score: 0</span>
                                <button class="btn-secondary" id="colorPatternStartBtn">🎲 New Game</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div class="color-pattern-game">
                                <div class="game-status">
                                    <h3 id="colorPatternStatus">Press Start to play</h3>
                                </div>
                                <div id="colorPatternBoard" class="color-pattern-board">
                                    <!-- Color buttons will be generated here -->
                                </div>
                                <div class="game-instructions">
                                    <p><strong>How to play:</strong> Watch the sequence of colors, then click them in the same order!</p>
                                    <p>Each level adds one more color to remember. How far can you get?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2048 Game Modal -->
                <div id="2048GameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>2️⃣ 2048</h2>
                            <div class="game-controls">
                                <span id="2048Score">Score: 0</span>
                                <span id="2048BestScore">Best: 0</span>
                                <button class="btn-secondary" id="2048NewBtn">🎲 New Game</button>
                                <button class="btn-secondary" id="2048UndoBtn">↶ Undo</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div id="2048Board" class="game-2048-board">
                                <!-- 4x4 2048 grid will be generated here -->
                            </div>
                            <div class="game-instructions">
                                <p><strong>How to play:</strong> Use arrow keys or swipe to move tiles. When two tiles with the same number touch, they merge into one!</p>
                                <div class="controls-info">
                                    <p>🔼 ↑ Up | 🔽 ↓ Down | ◀️ ← Left | ▶️ → Right</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Memory Card Game Modal -->
                <div id="memoryGameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>🧠 Memory Cards</h2>
                            <div class="game-controls">
                                <span id="memoryMoves">Moves: 0</span>
                                <span id="memoryPairs">Pairs: 0/8</span>
                                <span id="memoryTimer">00:00</span>
                                <button class="btn-secondary" id="memoryNewBtn">🎲 New Game</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div id="memoryBoard" class="memory-board">
                                <!-- Memory cards will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Snake Game Modal -->
                <div id="snakeGameModal" class="modal game-modal">
                    <div class="modal-content game-modal-content">
                        <span class="close">&times;</span>
                        <div class="game-header">
                            <h2>🐍 Snake Game</h2>
                            <div class="game-controls">
                                <span id="snakeScore">Score: 0</span>
                                <span id="snakeLength">Length: 1</span>
                                <select id="snakeSpeed">
                                    <option value="slow">Slow</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="fast">Fast</option>
                                </select>
                                <button class="btn-secondary" id="snakeNewBtn">🎲 New Game</button>
                                <button class="btn-secondary" id="snakePauseBtn">⏸️ Pause</button>
                            </div>
                        </div>
                        <div class="game-area">
                            <div id="snakeBoard" class="snake-board">
                                <!-- Snake game grid will be generated here -->
                            </div>
                            <div class="game-instructions">
                                <p><strong>Controls:</strong> Use arrow keys to control the snake</p>
                                <p>Eat food (����) to grow longer and increase your score!</p>
                                <div class="controls-info">
                                    <p>🔼 ↑ Up | 🔽 ↓ Down | ◀️ ← Left | ▶️ → Right</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Memories Section -->
            <section id="memories" class="section">
                <div class="section-header">
                    <h1>📸 Memories</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" id="startSlideshowBtn">🎬 Slideshow</button>
                        <button class="btn-primary" id="addMemoryBtn">+ Add Memory</button>
                    </div>
                </div>

                <div class="memories-stats">
                    <div class="stat-card">
                        <span id="totalMemories">0</span>
                        <label>Total Memories</label>
                    </div>
                    <div class="stat-card">
                        <span id="memoriesThisMonth">0</span>
                        <label>This Month</label>
                    </div>
                    <div class="stat-card">
                        <span id="upcomingBirthdays">0</span>
                        <label>Upcoming Birthdays</label>
                    </div>
                    <div class="stat-card">
                        <span id="memoriesSize">0 MB</span>
                        <label>Storage Used</label>
                    </div>
                </div>

                <!-- Memories Tabs -->
                <div class="memories-tabs">
                    <button class="tab-btn active" data-tab="memories-gallery">📷 Photos</button>
                    <button class="tab-btn" data-tab="birthdays-list">🎂 Birthdays</button>
                </div>

                <!-- Photos Gallery Tab -->
                <div id="memories-gallery" class="tab-content active">
                    <div class="memories-filters">
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="recent">Recent</button>
                            <button class="filter-btn" data-filter="favorites">Favorites</button>
                        </div>
                        <div class="search-container">
                            <input type="text" id="memorySearch" placeholder="Search memories..." class="search-input">
                        </div>
                    </div>

                    <div class="memories-gallery-grid" id="memoriesGallery">
                        <!-- Memory cards will be dynamically added here -->
                    </div>
                </div>

                <!-- Birthdays Tab -->
                <div id="birthdays-list" class="tab-content">
                    <div class="birthdays-section">
                        <div class="upcoming-birthdays">
                            <h3>���� Upcoming Birthdays</h3>
                            <div class="upcoming-birthdays-list" id="upcomingBirthdaysList">
                                <!-- Upcoming birthdays will be listed here -->
                            </div>
                        </div>

                        <div class="all-birthdays">
                            <h3>📅 All Birthdays</h3>
                            <div class="birthdays-list" id="allBirthdaysList">
                                <!-- All birthdays will be listed here -->
                            </div>
                        </div>
                    </div>

                    <button class="btn-primary add-birthday-btn" id="addBirthdayBtn">+ Add Birthday</button>
                </div>

                <!-- Add Memory Modal -->
                <div id="memoryModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Add Memory</h2>
                        <form id="memoryForm">
                            <div class="form-group">
                                <label for="memoryImage">Select Image</label>
                                <input type="file" id="memoryImage" accept="image/*" required>
                                <div class="image-preview" id="imagePreview"></div>
                            </div>

                            <div class="form-group">
                                <label for="memoryTitle">Title</label>
                                <input type="text" id="memoryTitle" placeholder="Give your memory a title" required>
                            </div>

                            <div class="form-group">
                                <label for="memoryDescription">Description</label>
                                <textarea id="memoryDescription" placeholder="What makes this memory special?" rows="3"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="memoryDate">Date</label>
                                <input type="date" id="memoryDate" required>
                            </div>

                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="memoryFavorite">
                                    <span class="checkmark"></span>
                                    Mark as favorite
                                </label>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('memoryModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Memory</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Add Birthday Modal -->
                <div id="birthdayModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Add Birthday</h2>
                        <form id="birthdayForm">
                            <div class="form-group">
                                <label for="birthdayName">Name</label>
                                <input type="text" id="birthdayName" placeholder="Person's name" required>
                            </div>

                            <div class="form-group">
                                <label for="birthdayDate">Birthday Date</label>
                                <input type="date" id="birthdayDate" required>
                            </div>

                            <div class="form-group">
                                <label for="birthdayRelation">Relationship</label>
                                <select id="birthdayRelation">
                                    <option value="family">👨‍👩‍👧‍👦 Family</option>
                                    <option value="friend">👫 Friend</option>
                                    <option value="colleague">💼 Colleague</option>
                                    <option value="other">👤 Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="birthdayNotes">Notes (Optional)</label>
                                <textarea id="birthdayNotes" placeholder="Gift ideas, special notes..." rows="3"></textarea>
                            </div>

                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="birthdayReminder" checked>
                                    <span class="checkmark"></span>
                                    Enable reminders
                                </label>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="app.closeModal('birthdayModal')">Cancel</button>
                                <button type="submit" class="btn-primary">Save Birthday</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Memory View Modal -->
                <div id="memoryViewModal" class="modal">
                    <div class="modal-content wide-modal">
                        <span class="close">&times;</span>
                        <div class="memory-view-content" id="memoryViewContent">
                            <!-- Memory details will be shown here -->
                        </div>
                    </div>
                </div>

                <!-- Slideshow Modal -->
                <div id="slideshowModal" class="modal slideshow-modal">
                    <div class="slideshow-container">
                        <div class="slideshow-header">
                            <div class="slideshow-title" id="slideshowTitle">Memory Slideshow</div>
                            <div class="slideshow-controls-top">
                                <button class="slideshow-btn" id="slideshowPlayPause" title="Play/Pause">⏸️</button>
                                <button class="slideshow-btn" id="slideshowSpeed" title="Speed: 3s">⏱️</button>
                                <button class="slideshow-btn" id="slideshowFullscreen" title="Fullscreen">⛶</button>
                                <button class="slideshow-btn close-slideshow" title="Exit">&times;</button>
                            </div>
                        </div>

                        <div class="slideshow-content">
                            <div class="slideshow-image-container">
                                <img id="slideshowImage" class="slideshow-image" alt="Memory">
                                <div class="slideshow-loading" id="slideshowLoading">Loading...</div>
                            </div>

                            <div class="slideshow-navigation">
                                <button class="nav-btn prev-btn" id="slideshowPrev" title="Previous">❮</button>
                                <button class="nav-btn next-btn" id="slideshowNext" title="Next">❯</button>
                            </div>
                        </div>

                        <div class="slideshow-footer">
                            <div class="slideshow-info">
                                <div class="slideshow-memory-title" id="slideshowMemoryTitle">Memory Title</div>
                                <div class="slideshow-memory-description" id="slideshowMemoryDescription">Memory description will appear here</div>
                                <div class="slideshow-memory-date" id="slideshowMemoryDate">Date</div>
                            </div>

                            <div class="slideshow-progress">
                                <div class="slideshow-counter" id="slideshowCounter">1 / 10</div>
                                <div class="slideshow-progress-bar">
                                    <div class="slideshow-progress-fill" id="slideshowProgressFill"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Help Section -->
            <section id="help" class="section">
                <div class="section-header">
                    <h1>❓ Help & Guide</h1>
                    <div class="header-actions">
                        <button class="btn-secondary" id="contactBtn">📧 Contact Support</button>
                    </div>
                </div>

                <!-- Help Instructions Section -->
                <div class="help-instructions-section">
                    <h3>❓ How to Use This App</h3>

                    <div class="help-navigation">
                        <button class="btn-secondary" id="prevHelpBtn" onclick="app.showPreviousHelp()">⬅️ Previous</button>
                        <span id="helpPageIndicator">1 / 8</span>
                        <button class="btn-secondary" id="nextHelpBtn" onclick="app.showNextHelp()">Next ➡️</button>
                    </div>

                    <div class="help-content">
                        <!-- Help Page 1: Dashboard -->
                        <div class="help-page active" id="helpPage1">
                            <div class="help-icon">🏠</div>
                            <h4>Dashboard Overview</h4>
                            <p>Your dashboard provides a quick summary of your daily activities:</p>
                            <ul>
                                <li><strong>Tasks:</strong> Track and complete your daily to-do items</li>
                                <li><strong>Expenses:</strong> Monitor your weekly spending patterns</li>
                                <li><strong>Meals:</strong> View suggested healthy meal options</li>
                                <li><strong>Workouts:</strong> Keep track of your fitness streak</li>
                                <li><strong>Mood:</strong> Check in with your emotional well-being</li>
                                <li><strong>Memories:</strong> Capture and organize your precious moments</li>
                            </ul>
                            <p>The Life Balance Score shows your overall wellness across all areas.</p>
                        </div>

                        <!-- Help Page 2: Tasks -->
                        <div class="help-page" id="helpPage2">
                            <div class="help-icon">📑</div>
                            <h4>Task Management</h4>
                            <p>Organize your daily productivity:</p>
                            <ul>
                                <li>Click <strong>"+ Add Task"</strong> to create new tasks</li>
                                <li>Choose categories like work, personal, health, etc.</li>
                                <li>Set due dates for important deadlines</li>
                                <li>Mark tasks as expense-related if they involve spending</li>
                                <li>Filter tasks by status: All, Today, Upcoming, Completed</li>
                                <li>Build productivity streaks by completing tasks daily</li>
                            </ul>
                            <p>Smart expense tracking automatically adds costs when you complete expense-related tasks!</p>
                        </div>

                        <!-- Help Page 3: Expenses -->
                        <div class="help-page" id="helpPage3">
                            <div class="help-icon">💰</div>
                            <h4>Expense Tracking</h4>
                            <p>Keep your finances organized:</p>
                            <ul>
                                <li><strong>Overview:</strong> See recent expenses and budget tracking</li>
                                <li><strong>Calendar:</strong> View expenses by date with color coding</li>
                                <li><strong>Analytics:</strong> Analyze spending trends and patterns</li>
                                <li><strong>Insights:</strong> Get financial health scores and predictions</li>
                                <li><strong>Reports:</strong> Generate comprehensive financial reports</li>
                                <li>Set monthly budgets and income to track savings</li>
                                <li>Use different payment methods and categorize expenses</li>
                            </ul>
                            <p>Advanced AI predictions help forecast future spending and savings goals.</p>
                        </div>

                        <!-- Help Page 4: Food & Nutrition -->
                        <div class="help-page" id="helpPage4">
                            <div class="help-icon">🍲</div>
                            <h4>Food & Nutrition Planning</h4>
                            <p>Manage your meals and nutrition:</p>
                            <ul>
                                <li>Track meals as either home-cooked or ordered</li>
                                <li>Log calories for each meal you consume</li>
                                <li>Plan daily meals with the meal planner</li>
                                <li>Compare costs between cooking and ordering</li>
                                <li>View meal calendar to plan ahead</li>
                                <li>Manage your pantry inventory</li>
                                <li>Get cost savings analysis for home cooking</li>
                            </ul>
                            <p>Cooking at home more often improves both health and savings!</p>
                        </div>

                        <!-- Help Page 5: Fitness & Wellness -->
                        <div class="help-page" id="helpPage5">
                            <div class="help-icon">🏋️</div>
                            <h4>Fitness & Wellness</h4>
                            <p>Stay active and manage stress:</p>
                            <ul>
                                <li><strong>Fitness:</strong> Try home exercises like desk stretches, yoga, breathing</li>
                                <li><strong>Stress & Mood:</strong> Daily mood check-ins and stress relief</li>
                                <li>Mark workouts complete to build your fitness streak</li>
                                <li>Use guided breathing exercises for stress relief</li>
                                <li>Track your mood trends over time</li>
                                <li>Get automated mood analysis and wellness insights</li>
                            </ul>
                            <p>Regular exercise and mood tracking help maintain mental and physical health.</p>
                        </div>

                        <!-- Help Page 6: Games -->
                        <div class="help-page" id="helpPage6">
                            <div class="help-icon">🎮</div>
                            <h4>Games & Brain Training</h4>
                            <p>Exercise your mind with fun puzzles:</p>
                            <ul>
                                <li><strong>5 Queens with Colors:</strong> Strategic placement puzzle with hints</li>
                                <li><strong>Sudoku:</strong> Classic number puzzles with multiple difficulty levels</li>
                                <li><strong>Memory Games:</strong> Improve cognitive skills with card matching</li>
                                <li><strong>Color Pattern:</strong> Test and improve your memory</li>
                                <li><strong>2048:</strong> Number sliding puzzle game</li>
                                <li><strong>Snake:</strong> Classic arcade-style game</li>
                                <li>Track your game statistics and improvement over time</li>
                            </ul>
                            <p>Regular brain training games help maintain cognitive health and provide stress relief.</p>
                        </div>

                        <!-- Help Page 7: Memories -->
                        <div class="help-page" id="helpPage7">
                            <div class="help-icon">📸</div>
                            <h4>Memories & Life Moments</h4>
                            <p>Capture and organize your precious moments:</p>
                            <ul>
                                <li><strong>Photo Memories:</strong> Upload and organize photos with dates and descriptions</li>
                                <li><strong>Slideshow:</strong> View your memories in a beautiful slideshow presentation</li>
                                <li><strong>Search & Filter:</strong> Find memories by title, description, or date</li>
                                <li><strong>Birthday Tracking:</strong> Remember important dates and get reminders</li>
                                <li>Click on photos to see their exact dates</li>
                                <li>Mark favorites for easy access</li>
                                <li>Storage management with file size tracking</li>
                            </ul>
                            <p>Preserve your life's precious moments with organized photo storage and birthday reminders.</p>
                        </div>

                        <!-- Help Page 8: Reports & Export -->
                        <div class="help-page" id="helpPage8">
                            <div class="help-icon">📊</div>
                            <h4>Reports & Data Export</h4>
                            <p>Analyze your progress and export data:</p>
                            <ul>
                                <li>Generate comprehensive weekly and monthly reports</li>
                                <li>Export data in CSV or JSON format from any section</li>
                                <li>View detailed analysis of all life areas</li>
                                <li>Track progress over time with trends and charts</li>
                                <li>Get personalized advice based on your patterns</li>
                                <li>Download complete data backups</li>
                                <li>Correlation analysis between different life aspects</li>
                            </ul>
                            <p>Regular review of your data helps identify patterns and areas for improvement.</p>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="contact-info">
                        <h3>📧 Need Help or Have Suggestions?</h3>
                        <p>If you have any questions, encounter issues, or want to suggest improvements, we're here to help!</p>
                        <div class="contact-details">
                            <p><strong>Email:</strong> <a href="mailto:kanishjebamathew.m@gmail.com">kanishjebamathew.m@gmail.com</a></p>
                            <p><strong>Response Time:</strong> Usually within 24 hours</p>
                        </div>

                        <div class="support-tips">
                            <h4>💡 Quick Tips:</h4>
                            <ul>
                                <li>Try refreshing the page if something doesn't work</li>
                                <li>Check your browser's storage if data seems missing</li>
                                <li>Export your data regularly as backup</li>
                                <li>Use the latest version of Chrome or Firefox for best experience</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Report Generator Section -->
            <section id="report" class="section">
                <div class="section-header">
                    <h1>📊 Report Generator</h1>
                    <!-- Period selector and export buttons will be added dynamically -->
                </div>

                <!-- Comprehensive Report Download Section -->
                <div class="comprehensive-download">
                    <h3>���� Comprehensive Analysis Report</h3>
                    <p>Download a complete analysis including trends, correlations, insights, and recommendations.</p>
                    <div class="download-options">
                        <button class="btn-primary" onclick="app.downloadComprehensiveReport('json')">📊 Download Full Report (JSON)</button>
                        <button class="btn-secondary" onclick="app.downloadComprehensiveReport('csv')">📈 Download Summary (CSV)</button>
                    </div>
                </div>

                <div class="report-summary">
                    <div class="summary-grid">
                        <div class="summary-card tasks-summary">
                            <h3>✅ Tasks Completed</h3>
                            <div class="big-stat" id="reportTasksCompleted">85%</div>
                            <p id="reportTasksDetail">17/20 tasks completed this week</p>
                        </div>
                        
                        <div class="summary-card expense-summary">
                            <h3>💰 Total Spending</h3>
                            <div class="big-stat" id="reportTotalSpent">₹4,200</div>
                            <p id="reportExpenseDetail">Top categories: Food, Bills, Shopping</p>
                        </div>
                        
                        <div class="summary-card food-summary">
                            <h3>🍲 Healthy Meals</h3>
                            <div class="big-stat" id="reportHealthyMeals">5/7</div>
                            <p id="reportFoodDetail">Cooked at home 5 days, saved ₹1,200</p>
                        </div>
                        
                        <div class="summary-card fitness-summary">
                            <h3>🏋️ Workout Days</h3>
                            <div class="big-stat" id="reportWorkoutDays">4/7</div>
                            <p id="reportFitnessDetail">Maintained 8-day streak</p>
                        </div>
                        
                        <div class="summary-card stress-summary">
                            <h3>😌 Stress Levels</h3>
                            <div class="big-stat" id="reportStressLevel">Medium</div>
                            <p id="reportStressDetail">High stress on 2 days, low on 3 days</p>
                        </div>
                    </div>
                </div>

                <div class="personalized-advice">
                    <h3>🎯 Personalized Advice</h3>
                    <div class="advice-card" id="personalizedAdvice">
                        <p>You spent too much on food delivery this week. Try cooking twice more at home next week to save ₹1,500 and reduce stress. Your workout consistency is great - keep it up!</p>
                    </div>
                </div>

                <div class="weekly-trends">
                    <h3>📈 Weekly Trends</h3>
                    <canvas id="trendsChart" width="800" height="400"></canvas>
                </div>
            </section>
        </main>
    </div>

    <script src="storage.js"></script>
    <script src="utils.js"></script>
    <script src="charts.js"></script>
    <script src="notifications.js"></script>
    <script src="app.js"></script>
    <script src="games.js"></script>
    <script src="queens-colors.js"></script>
    <script src="memories.js"></script>
</body>
</html>
